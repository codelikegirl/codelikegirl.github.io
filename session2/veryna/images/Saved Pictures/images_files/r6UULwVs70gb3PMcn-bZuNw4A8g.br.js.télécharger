var SerpKeyboardNavigation;(function(){function c(){s=_d.activeElement;n=null;e=!1;t=-1;tt();i=_w.NavSelector&&NavSelector(!1)}function b(){p();n=null}function k(r){var e,c,o;r&&(r.keyCode==u.Tab&&h&&(f("TOP"),h=!1),e=_d.activeElement,i&&e&&e.className!=="b_searchbox"&&(f("Keydown"),r.keyCode==u.Enter?(c=rt(),e===s&&l(r)&&i.length>0&&c>-1?(y(c),f("EF",t),sj_pd(r)):(n=null,f(t==-1?"EN":"EE",t))):l(r)&&(o=d(r.keyCode),o!==-1&&o!==t&&(y(o),sj_pd(r)))))}function f(n,t){sj_log("CI.SerpKeyboardNav",n,t?t.toString():"")}function l(t){return n||s==_d.activeElement?t.altKey||t.ctrlKey?!1:!0:!1}function d(n){if(n===u.Tab)return g();if(n===u.Down||n===u.Up){var t=document.activeElement;return t&&(t.tagName.toLowerCase()==="select"||t.tagName.toLowerCase()==="input")?-1:nt(n===u.Down)}return-1}function g(){var i=-1;return n?(p(),e=!0,t=-1,f("TO")):(i=0,f("TI")),i}function nt(r){var u=-1,s,h,o;return n&&(e?(e=!1,s=i.indexOf(_d.activeElement),s!==-1?u=a(r,s):(h=_w.NavSelector&&NavSelector(!0),o=h.indexOf(_d.activeElement),o!==-1&&(u=v(r?o:o-1)))):u=a(r,t),f(r?"AD":"AU",u)),u}function a(n,t){return v(n?t+1:t-1)}function v(n){return Math.max(Math.min(n,i.length-1),0)}function tt(){r=sj_ce("div","kn_p");o=sj_ce("span",w);o.innerHTML="â–º";r.appendChild(o);o.title="Use the up and down arrow keys to focus results"}function y(u){t=u;n=i[t];n&&n.parentNode&&(n.parentNode.insertBefore(r,n.parentNode.firstChild),it(r),n.focus())}function p(){r&&r.parentNode&&r.parentNode.removeChild(r)}function it(n){var t=n.getBoundingClientRect();t.bottom>window.innerHeight&&n.scrollIntoView()}function rt(){for(var t=_ge("b_pole"),n=0;n<i.length;n++)if(!t||!t.contains(i[n]))return n;return-1}var n,i,t=-1,e=!1,w="kn_a",r,o,h=!0,s,u;(function(n){n[n.Up=38]="Up";n[n.Down=40]="Down";n[n.Tab=9]="Tab";n[n.Enter=13]="Enter"})(u||(u={}));sj_be(_d,"keydown",k);sj_be(_d.body,"mousedown",b,!0);sj_evt.bind("ajax.load",c,1,1);c()})(SerpKeyboardNavigation||(SerpKeyboardNavigation={}))